
SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;


-- ----------------------------
-- Table article
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}article`;
CREATE TABLE `{dbprefix}article`  (
  `article_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(10) UNSIGNED NULL DEFAULT NULL,
  `image_id` int(11) NULL DEFAULT NULL,
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `summary` varchar(5000) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `content` text CHARACTER SET utf8 COLLATE utf8_bin NULL,
  `status` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `insert_date` datetime(0) NULL DEFAULT NULL,
  `feature` tinyint(1) NULL DEFAULT 0,
  `visitors` int(11) NULL DEFAULT 0,
  `visits` int(11) NULL DEFAULT 0,
  PRIMARY KEY (`article_id`) USING BTREE,
  INDEX `{dbprefix}article_user_id`(`user_id`) USING BTREE,
  INDEX `{dbprefix}artilce_image_id`(`image_id`) USING BTREE,
  CONSTRAINT `{dbprefix}article_user_id` FOREIGN KEY (`user_id`) REFERENCES `{dbprefix}user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `{dbprefix}artilce_image_id` FOREIGN KEY (`image_id`) REFERENCES `{dbprefix}file` (`file_id`) ON DELETE SET NULL ON UPDATE SET NULL
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records article
-- ----------------------------
INSERT INTO `{dbprefix}article` VALUES (1, NULL, 0, 'سلاااام به پینوکس خوش اومدی :)', 'اینجا اپلیکیشن paper پینوکس هست', '<p>اپلیکیشن paper با پلتفرم اوپن سورس توسعه وب پینوکس به منظور ایجاد وبسایت محتوایی، خبری، شخصی و وبسایت هایی از این دست توسعه داده شده و شما می توانید از تمامی امکانات آن به رایگان بهره مند شوید.</p>', 'publish', NULL, 0, 0, 0);

-- ----------------------------
-- Table tag
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}tag`;
CREATE TABLE `{dbprefix}tag`  (
  `tag_id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `tag_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`tag_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table article_tag
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}article_tag`;
CREATE TABLE `{dbprefix}article_tag`  (
  `tag_id` int(10) UNSIGNED NOT NULL,
  `article_id` int(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`tag_id`, `article_id`) USING BTREE,
  INDEX `article_tag_article_id`(`article_id`) USING BTREE,
  CONSTRAINT `{dbprefix}article_tag_article_id` FOREIGN KEY (`article_id`) REFERENCES `{dbprefix}article` (`article_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `{dbprefix}article_tag_tag_id` FOREIGN KEY (`tag_id`) REFERENCES `{dbprefix}tag` (`tag_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table comment
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}comment`;
CREATE TABLE `{dbprefix}comment`  (
  `comment_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) UNSIGNED NULL DEFAULT NULL,
  `article_id` int(10) UNSIGNED NULL DEFAULT NULL,
  `user_id` int(10) UNSIGNED NULL DEFAULT NULL,
  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `mobile` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `full_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `message` varchar(5000) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `insert_date` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`comment_id`) USING BTREE,
  INDEX `{dbprefix}comment_user_id`(`user_id`) USING BTREE,
  INDEX `{dbprefix}comment_parent_id`(`parent_id`) USING BTREE,
  CONSTRAINT `{dbprefix}comment_parent_id` FOREIGN KEY (`parent_id`) REFERENCES `{dbprefix}comment` (`comment_id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `{dbprefix}comment_user_id` FOREIGN KEY (`user_id`) REFERENCES `{dbprefix}user` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table contact
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}contact`;
CREATE TABLE `{dbprefix}contact`  (
  `contact_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `full_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `subject` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `mobile` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `message` varchar(5000) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `status` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `insert_date` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`contact_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Table page
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}page`;
CREATE TABLE `{dbprefix}page`  (
  `page_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `page_key` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `content` text CHARACTER SET utf8 COLLATE utf8_bin NULL,
  `status` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `insert_date` datetime(0) NULL DEFAULT NULL,
  `visitors` int(11) NULL DEFAULT 0,
  `visits` int(11) NULL DEFAULT 0,
  PRIMARY KEY (`page_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records page
-- ----------------------------
INSERT INTO `{dbprefix}page` VALUES (1, 'about', 'درباره ما', '<p>با اپلیکیشن paper می توانید وبلاگ شخصی خود را به رایگان و به آسانی ایجاد کنید.</p><p>این صفحه را می توانید از طریق پنل مدیریت و منوی<strong> برگه ها</strong> ویرایش کنید</p>', 'publish', null, 0, 0);

-- ----------------------------
-- Table settings
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}settings`;
CREATE TABLE `{dbprefix}settings`  (
  `settings_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `s_key` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `s_value` text CHARACTER SET utf8 COLLATE utf8_bin NULL,
  `s_dataset` text CHARACTER SET utf8 COLLATE utf8_bin NULL,
  `s_default` text CHARACTER SET utf8 COLLATE utf8_bin NULL,
  `s_view` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `s_order` int(11) NULL DEFAULT NULL,
  `s_group` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  PRIMARY KEY (`settings_id`) USING BTREE,
  UNIQUE INDEX `s_key`(`s_key`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 12 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records settings
-- ----------------------------
INSERT INTO `{dbprefix}settings` VALUES (1, 'site_title', '', NULL, 'paper', '{site title}', 1, 'general');
INSERT INTO `{dbprefix}settings` VALUES (2, 'site_description', '', NULL, '{site description}', 'input', 2, 'general');
INSERT INTO `{dbprefix}settings` VALUES (5, 'newest_article_count', '10', NULL, NULL, 'input:number', 1, 'articles');
INSERT INTO `{dbprefix}settings` VALUES (6, 'most_visited_count', '4', NULL, NULL, 'input:number', 2, 'articles');
INSERT INTO `{dbprefix}settings` VALUES (7, 'hot_tags_count', '12', NULL, NULL, 'input:number', 3, 'articles');
INSERT INTO `{dbprefix}settings` VALUES (8, 'twitter_link', 'https://twitter.com/pinoox_com', NULL, '', 'input', 1, 'social');
INSERT INTO `{dbprefix}settings` VALUES (9, 'instagram_link', 'https://instagram.com/pinoox.ir/', NULL, NULL, 'input', 2, 'social');
INSERT INTO `{dbprefix}settings` VALUES (10, 'telegram_link', 'https://t.me/s/pinoox', NULL, NULL, 'input', 3, 'social');
INSERT INTO `{dbprefix}settings` VALUES (11, 'site_lang', 'fa', '{\"fa\":\"فارسی\",\"en\":\"english\"}', 'fa', 'select', 3, 'general');

-- ----------------------------
-- Table menu
-- ----------------------------
DROP TABLE IF EXISTS `{dbprefix}menu`;
CREATE TABLE `{dbprefix}menu`  (
  `menu_id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `menu_key` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `link` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  `icon` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL,
  PRIMARY KEY (`menu_id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8 COLLATE = utf8_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records menu
-- ----------------------------
INSERT INTO `{dbprefix}menu` VALUES (1, 'primary', 'صفحه اصلی', '', 'fa fa-home');
INSERT INTO `{dbprefix}menu` VALUES (2, 'primary', 'درباره ما', 'about', 'fa fa-info');
INSERT INTO `{dbprefix}menu` VALUES (3, 'primary', 'تماس با ما', 'contact', 'fa fa-phone');
INSERT INTO `{dbprefix}menu` VALUES (5, 'footer', 'تماس با ما', 'contact', '');
INSERT INTO `{dbprefix}menu` VALUES (6, 'footer', 'درباره ما', 'about', '');


SET FOREIGN_KEY_CHECKS = 1;
